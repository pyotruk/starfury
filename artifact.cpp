#include "artifact.h"
/////////////////////////////////////////////////////////////////////////////////////
Artifact::Artifact() :
    _center(0, 0),
    _magnitude(0)
{}
/////////////////////////////////////////////////////////////////////////////////////
Artifact::Artifact(const Artifact &a)
{
    this->_center = a._center;
    this->_magnitude = a._magnitude;
}
/////////////////////////////////////////////////////////////////////////////////////
Artifact& Artifact::operator =(const Artifact &a)
{
    if(this != &a)
    {
        this->_center = a._center;
        this->_magnitude = a._magnitude;
    }
    return *this;
}
/////////////////////////////////////////////////////////////////////////////////////
void Artifact::setCenter(const QPoint &p)
{
    _center = p;
}
/////////////////////////////////////////////////////////////////////////////////////
void Artifact::setMagnitude(const double m)
{
    _magnitude = m;
}
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
void art::selectOnCircle(ArtifactVector &a,
                         const QPoint &center,
                         const int radius)
{
    double r = (double)radius;
    double dist;
    ArtifactVector::iterator it = a.begin();
    for(; it < a.end(); ++it)
    {
        dist = ac::calcDistance(center, it->center());
        if(dist > r)
        {
            a.erase(it);
        }
    }
}
/////////////////////////////////////////////////////////////////////////////////////
void art::cutoff(ArtifactVector &a,
                 const int newLength)
{
    int dif = a.size() - newLength;
    if(dif > 0)     a.erase(a.end() - dif, a.end());
}
/////////////////////////////////////////////////////////////////////////////////////
bool art::isEqual(const Artifact &a1,
                  const Artifact &a2,
                  const double eps)
{
    return  ac::isEqual(a1.center(), a2.center(), eps);
}
/////////////////////////////////////////////////////////////////////////////////////
void art::deleteEqual(ArtifactVector &a,
                      const double eps)
{
    ArtifactVector::iterator i = a.begin();
    ArtifactVector::iterator j = a.begin();
    for(; i < a.end(); ++i)
    {
        for(; j < a.end(); ++j)
        {
            if(j == i)    continue;
            if(art::isEqual(*i, *j, eps))
            {
                a.erase(j);
            }
        }
    }
}
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
