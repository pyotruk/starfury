#ifndef GUIDECODEC_H
#define GUIDECODEC_H
/////////////////////////////////////////////////////////////////////////////////////
#include <QtGlobal>
//#include <QDataStream>
#include <qmath.h>
/////////////////////////////////////////////////////////////////////////////////////
#include "star.h"
/////////////////////////////////////////////////////////////////////////////////////
#define pi                3.1415926535897932384626433832795
#define BYTES_PER_STAR    7      //кол-во байт на одну звезду в каталоге
#define BLOCK_SIZE_DELTA  0.02   //[radians] размер блока в каталоге по склонению
#define BLOCK_SIZE_STARS  175000 //размер блока в каталоге по кол-ву звёзд
#define MARGIN_KOEF       1.55   //коэффициент запаса при расчёте размера рабочего блока
/////////////////////////////////////////////////////////////////////////////////////
union Tib4
{
    qint32 i;
    uchar b[4];
};
/////////////////////////////////////////////////////////////////////////////////////
//QDataStream &operator <<(QDataStream &out, Star &star);
//QDataStream &operator >>(QDataStream &in,  Star &star);
/////////////////////////////////////////////////////////////////////////////////////
void decodeStar(Star &star, char *data);
/////////////////////////////////////////////////////////////////////////////////////
qint64 calcWorkBlockSize(const double fieldHeight);
void   calcPositionRange(const qint64 streamSize,
                         const double lowerDelta,
                         const double upperDelta,
                         const double fieldHeight,
                         qint64 &startPos,
                         qint64 &finPos);
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
#endif // GUIDECODEC_H
