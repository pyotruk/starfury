#include "timeutils.h"
/////////////////////////////////////////////////////////////////////////////////////
void timeutils::winfiletime2qdatetime(const qint64 &fileTime,
                                      QDateTime    &qtTime)
{
    FILETIME ftime;
    SYSTEMTIME sysTime;
    qint32 *p = (qint32*)(&fileTime);
    ftime.dwLowDateTime = *p;
    ++p;
    ftime.dwHighDateTime = *p;
    FileTimeToSystemTime(&ftime, &sysTime);
    QDate date(sysTime.wYear,
               sysTime.wMonth,
               sysTime.wDay);
    QTime time(sysTime.wHour,
               sysTime.wMinute,
               sysTime.wSecond,
               sysTime.wMilliseconds);
    qtTime.setDate(date);
    qtTime.setTime(time);
}
/////////////////////////////////////////////////////////////////////////////////////
int timeutils::msecFromDayBegin()
{
    QTime t(0, 0, 0, 0);
    int msec = t.msecsTo(QTime::currentTime());
    return msec;
}
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
