#ifndef TRIANGLE_H
#define TRIANGLE_H
/////////////////////////////////////////////////////////////////////////////////////
/* Классы для решения задачи отождествления звёздных конфигураций
   методом подобных треугольников. */
/////////////////////////////////////////////////////////////////////////////////////
#include <QVector>
#include <QPointF>
#include <QtAlgorithms>
#include "qmath.h"
/////////////////////////////////////////////////////////////////////////////////////
#include "boxes/artifact.h"
#include "math/astrocalc.h"
#include "boxes/databox.h"
#include "astrometry/simtri/combo.h"
#include "astrometry/astrometry.h"
/////////////////////////////////////////////////////////////////////////////////////
typedef Artifact Triangle[3];
/////////////////////////////////////////////////////////////////////////////////////
class ArtifactTriangle
{
public:
    explicit ArtifactTriangle() {}
    explicit ArtifactTriangle(const Artifact &a,
                              const Artifact &b,
                              const Artifact &c)
    {_t[0] = a;  _t[1] = b;  _t[2] = c;}
    const Triangle& t() const {return _t;}
private:
    Triangle _t;
};
/////////////////////////////////////////////////////////////////////////////////////
typedef QVector<ArtifactTriangle> TriangleVector;
/////////////////////////////////////////////////////////////////////////////////////
struct TriangleBoxData
{
    TriangleVector picTriangles;
    TriangleVector catTriangles;
};
/////////////////////////////////////////////////////////////////////////////////////
typedef DataBox<TriangleBoxData> TriangleBox;
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
typedef int SimPath[3]; //путь подобия (соответствие сторон треугольников)
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
namespace simtri
{
static const double __equalEps = 2.0;
static const int    __maxStarQuantityForSimtriMethod = 8;
//
int equate(ArtifactVector &picStars,
           ArtifactVector &catStars,
           const QSize    &screen,
           const double    similarEps,
           const double    nearStarDist,
           int       maxStarQuantity,
           const int       minEquatedStarQuantity);
}
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////
#endif // ARTTRIANGLE_H
