#include "angmeas.h"
/////////////////////////////////////////////////////////////////////////////////////
AngMeas::AngMeas(QSettings *settings) :
    _settings(settings),
    _frame(new Frame)
{
    this->moveToThread(this);
    this->start(QThread::NormalPriority);
}
/////////////////////////////////////////////////////////////////////////////////////
AngMeas::~AngMeas()
{
    this->exit();
    this->terminate();
    delete _frame;
}
/////////////////////////////////////////////////////////////////////////////////////
void AngMeas::frameIn(Frame *frame,
                      QMutex *mutex)
{
    if(mutex->tryLock(_timeout))
    {
        *_frame = *frame;
        mutex->unlock();
        processing(_frame);
    }
}
/////////////////////////////////////////////////////////////////////////////////////
void AngMeas::processing(Frame *)
{
    cv::floodFill(_frame->asCvMat(), cv::Point(100, 100), 0xFF);
}
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
